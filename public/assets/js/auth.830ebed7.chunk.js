(this["webpackJsonpautos-web"]=this["webpackJsonpautos-web"]||[]).push([[7],{706:function(e,t,s){"use strict";var o=s(1),i=s.n(o),r=s(38),n=s(30),a=s(4),c=s(0);class l extends o.Component{render(){const{children:e}=this.props;let t=a.o.path;return this.props.getNewlyAuthed()&&(t={pathname:a.o,state:{modal:"AuthModal",options:{screen:"welcome"}}}),Object(c.jsx)(i.a.Fragment,{children:this.props.isAuthenticated()?Object(c.jsx)(r.b,{to:t}):Object(c.jsx)(i.a.Fragment,{children:e})})}}t.a=Object(n.a)(l)},711:function(e,t,s){"use strict";s.r(t);var o=s(1),i=s(15),r=s(13),n=s(370),a=s(239),c=s(369),l=s(12),d=s(38),h=s(108),p=s(749),m=s(85),u=s(22),j=s(47),b=s(4),g=s(6),f=s(0);let{path:x,exact:O,...k}=b.u,{path:S,exact:v,...A}=b.O,{path:C,exact:E,...N}=b.n;class w extends o.Component{render(){const{screen:e}=this.props;return Object(f.jsxs)(n.a,{isOpen:this.props.isOpen,fade:!1,backdrop:!1,className:"auth modal-424 centered-content ".concat(e),autoFocus:!1,returnFocusAfterClose:!1,centered:!0,children:[Object(f.jsx)(a.a,{toggle:this.props.onCancel}),Object(f.jsx)(c.a,{children:this.props.children})]})}}class y extends o.Component{render(){const{screen:e}=this.props;return Object(f.jsx)("div",{className:"modal-dialog auth modal-424 centered-content ".concat(e),children:Object(f.jsx)("div",{className:"modal-content",children:Object(f.jsx)("div",{className:"modal-body",children:this.props.children})})})}}const M={email:"",emailExists:!1,provider:"",credential:"",initial_screen:""};class _ extends o.Component{constructor(e){super(e),this.onClose=e=>{if(e&&e.preventDefault(),this.props.location.state&&this.props.location.state.modal&&this.props.location.state.options&&"welcome"===this.props.location.state.options.screen){const{modal:e,options:t,...s}=this.props.location.state;this.props.history.replace({pathname:this.props.location.pathname,search:this.props.location.search,state:s})}this.props.actions.clearSessionFlags(),this.props.onClose()},this.onNeedsConfirmation=e=>{this.props.actions.setModalScreen("confirmation"),this.setState({email:e})},this.checkAutomaticActions=e=>{const{redirect_context:t}=e;return t&&t.referrer&&t.referrer.state&&"watch"===t.referrer.state.action&&t.referrer.state.auction_id&&(this.props.actions.watchAuction(t.referrer.state.auction_id,!0),delete e.redirect_context.referrer.state),e},this.onAuthenticated=e=>{let{redirect_url:t,redirect_context:s,redirect_expiry:o}=e;if(this.props.isEmbedded)return!0;s&&s.referrer?s.referrer.state?this.props.history[s.history](s.referrer.to,s.referrer.state):this.props.history[s.history](s.referrer.to,this.props.location.state):t&&this.props.history.push(t),this.onClose()},this.onSignUpWithEmail=e=>{this.setState({email:e,emailExists:!1},(()=>{this.props.actions.setModalScreen("setpassword")}))},this.onUserExistsError=()=>{this.setState({emailExists:!0},(()=>{this.props.actions.setModalScreen("signup")}))},this.onNeedsLinking=e=>{let{provider:t,credential:s,email:o}=e;this.props.actions.setModalScreen("verifylinking"),this.setState({provider:t,credential:s,email:o})},this.onVerifiedLinking=e=>{e=this.checkAutomaticActions(e),this.onAuthenticated(e)},this.onSetUsername=(e,t,s)=>{if(e){s=this.checkAutomaticActions(s);const{redirect_context:e}=s;e?e.referrer.state&&g.B.indexOf(e.referrer.state.action)<0?this.props.actions.showModal("AuthModal",{screen:"welcome"}):this.props.history[e.history](e.referrer.to,e.referrer.state):this.props.actions.showModal("AuthModal",{screen:"welcome"})}else this.onNeedsConfirmation(t)},this.onToggleScreen=(e,t)=>{if(this.props.isEmbedded)return!0;e&&e.preventDefault(),e&&this.props.actions.clearSessionFlags(),this.props.actions.setModalScreen(t);const s={};"signin"!==t&&"signup"!==t&&"forgotpassword"!==t||(s.email="",s.emailExists=!1),this.setState(s)},this.onCredDNE=e=>{let{provider:t,credential:s,email:o}=e;this.props.actions.setModalScreen("setusername"),this.setState({provider:t,credential:s,email:o})},this.onMissingEmail=e=>{let{provider:t,credential:s}=e;this.props.actions.setModalScreen("emailrequired"),this.setState({provider:t,credential:s})},this.onBackToSignUp=()=>{this.props.actions.setModalScreen("signup"),this.setState({email:"",emailExists:!1,provider:"",credential:""})},this.onBackToSignIn=()=>{this.props.actions.setModalScreen("signin"),this.setState({email:"",emailExists:!1,provider:"",credential:""})};const t={...M},{provider:s,credential:o,email:i,screen:r}=this.props;s&&o&&i&&(t.provider=s,t.credential=o,t.email=i),t.randID=(new Date).getTime()+"",t.initial_screen=r,this.state=t}componentDidUpdate(e){if(!e.isOpen&&this.props.isOpen){const e={...M,randID:this.state.randID},{provider:t,credential:s,email:o,screen:i}=this.props;t&&s&&o&&(e.provider=t,e.credential=s,e.email=o),e.initial_screen=i,this.setState(e)}}render(){const{isOpen:e,isEmbedded:t,modal:s,confirmation_token:o}=this.props,{options:i={}}=s,{next:r,referrer:n,screen:a}=i,{email:c,emailExists:d,provider:m,credential:u,randID:j,initial_screen:g}=this.state,x=a||g,O=t?y:w;return Object(f.jsxs)(O,{isOpen:e,onCancel:this.onClose,screen:x,children:[Object(f.jsx)("div",{className:"modal-logo",children:Object(f.jsx)(h.a,{})}),"confirmation"===x&&Object(f.jsx)(p.b,{email:c}),"verifyemail"===x&&Object(f.jsx)(p.n,{onAuthenticated:this.onAuthenticated,isEmbedded:t,checkAutomaticActions:this.checkAutomaticActions,confirmation_token:o}),"signin"===x&&Object(f.jsx)(p.g,{next:r,referrer:n,onAuthenticated:this.onAuthenticated,onNeedsConfirmation:this.onNeedsConfirmation,onWelcome:e=>{this.onToggleScreen(e,"welcome")},onMissingEmail:this.onMissingEmail,onCredDNE:this.onCredDNE,onExisting:this.onNeedsLinking,toggle:Object(f.jsxs)("p",{className:"alt-path",children:["Need to create an account? ",Object(f.jsx)(l.b,{to:b.O.path,...A,onClick:e=>{this.onToggleScreen(e,"signup")},children:"Sign up here"})]}),forgot:Object(f.jsx)(l.b,{...N,className:"btn btn-link",to:b.n.path,onClick:e=>{this.onToggleScreen(e,"forgotpassword")},children:"Forgot your password?"}),isEmbedded:t,randID:j,checkAutomaticActions:this.checkAutomaticActions}),"signup"===x&&Object(f.jsx)(p.m,{next:r,email:c,emailExists:d,emailErrorToggle:Object(f.jsx)(l.b,{to:b.u.path,...k,onClick:e=>{this.onToggleScreen(e,"signin")},children:"Sign in?"}),referrer:n,onSubmit:this.onSignUpWithEmail,onAuthenticated:this.onAuthenticated,onNeedsConfirmation:this.onNeedsConfirmation,onCredDNE:this.onCredDNE,onExisting:this.onNeedsLinking,onMissingEmail:this.onMissingEmail,toggle:Object(f.jsxs)("p",{className:"alt-path",children:["Already have an account? ",Object(f.jsx)(l.b,{to:b.u.path,...k,onClick:e=>{this.onToggleScreen(e,"signin")},children:"Sign in here"})]}),isEmbedded:t,randID:j,checkAutomaticActions:this.checkAutomaticActions}),"forgotpassword"===x&&Object(f.jsx)(p.e,{toggle:Object(f.jsx)("p",{className:"alt-path",children:Object(f.jsx)(l.b,{to:b.u.path,...k,onClick:e=>{this.onToggleScreen(e,"signin")},children:"Back to sign in"})}),isEmbedded:t,randID:j,referrer:n}),"setpassword"===x&&Object(f.jsx)(p.k,{onSuccess:this.onNeedsConfirmation,onUserExistsError:this.onUserExistsError,email:c,isEmbedded:t,randID:j,referrer:n}),"setusername"===x&&Object(f.jsx)(p.l,{onSuccess:this.onSetUsername,onBackToSignUp:this.onBackToSignUp,onBackToSignIn:this.onBackToSignIn,emailErrorToggle:Object(f.jsx)(l.b,{to:b.u.path,...k,onClick:e=>{this.onToggleScreen(e,"signin")},children:"Sign in?"}),provider:m,credential:u,email:c,isEmbedded:t,randID:j,referrer:n}),"resetpassword"===x&&Object(f.jsx)(p.i,{reset_token:i?i.reset_token:"",onNeedsAuth:e=>{this.onToggleScreen(e,"signin")},onTokenError:e=>{this.onToggleScreen(e,"forgotpassword")},onSuccess:this.onClose,referrer:n}),"welcome"===x&&Object(f.jsx)(p.p,{onClose:this.onClose,referrer:n}),"emailrequired"===x&&Object(f.jsx)(p.c,{onBack:this.onBackToSignUp,provider:"facebook",referrer:n}),"verifylinking"===x&&Object(f.jsx)(p.o,{onSuccess:this.onVerifiedLinking,onBack:this.onBackToSignIn,provider:m,credential:u,email:c,isEmbedded:t,randID:j,referrer:n,forgot:Object(f.jsx)(l.b,{...N,className:"btn btn-link",to:b.n.path,onClick:e=>{this.onToggleScreen(e,"forgotpassword")},children:"Forgot your password?"})}),"signin"!==x&&"signup"!==x&&"welcome"!==x&&"confirmation"!==x&&"resetpassword"!==x&&"verifyemail"!==x&&Object(f.jsx)("div",{className:"auth-help",children:Object(f.jsx)("a",{href:b.mb("section","sign-in"),target:"_blank",rel:"noopener noreferrer",title:"Need help?",children:"Need help?"})})]})}}t.default=Object(d.h)(Object(r.b)((e=>({modal:e.modal})),(e=>({actions:Object(i.b)({clearSessionFlags:m.d,setModalScreen:j.c,watchAuction:u.watchAuction,showModal:j.d},e)})))(_))},833:function(e,t,s){"use strict";s.r(t);var o=s(1),i=s(106),r=s(706),n=s(711),a=s(84),c=s(0);class l extends o.Component{render(){const{location:e}=this.props;return Object(c.jsx)(r.a,{children:Object(c.jsxs)(a.a,{className:"embedded-modal",children:[Object(c.jsx)(i.a,{titleTag:"Forgot password",titleShare:"Forgot password",url:"".concat("https://carsandbids.com").concat(e.pathname).concat(e.search)}),Object(c.jsx)("div",{className:"row",children:Object(c.jsx)("div",{className:"col",children:Object(c.jsx)(n.default,{isOpen:!0,onClose:()=>{},isEmbedded:!0,screen:"forgotpassword"})})})]})})}}t.default=l},834:function(e,t,s){"use strict";s.r(t);var o=s(1),i=s(4);class r extends o.Component{componentDidMount(){if("ReactSnap"===navigator.userAgent)return;const e=this.props.match.params.token;this.props.history.push(i.o.path,{modal:"AuthModal",options:{screen:"resetpassword",reset_token:e}})}render(){return null}}t.default=r},835:function(e,t,s){"use strict";s.r(t);var o=s(1),i=s(106),r=s(706),n=s(711),a=s(84),c=s(0);class l extends o.Component{render(){const{location:e}=this.props;return Object(c.jsx)(r.a,{children:Object(c.jsxs)(a.a,{className:"embedded-modal",children:[Object(c.jsx)(i.a,{titleTag:"Sign in",titleShare:"Sign in",url:"".concat("https://carsandbids.com").concat(e.pathname).concat(e.search)}),Object(c.jsx)("div",{className:"row",children:Object(c.jsx)("div",{className:"col",children:Object(c.jsx)(n.default,{isOpen:!0,onClose:()=>{},isEmbedded:!0,screen:"signin"})})})]})})}}t.default=l},836:function(e,t,s){"use strict";s.r(t);var o=s(1),i=s(15),r=s(13),n=s(38),a=s(85),c=s(4),l=s(0);class d extends o.Component{componentDidMount(){this.props.actions.logout()}render(){return Object(l.jsx)(n.b,{to:c.o.path})}}t.default=Object(r.b)(null,(e=>({actions:Object(i.b)({logout:a.j},e)})))(d)},837:function(e,t,s){"use strict";s.r(t);var o=s(1),i=s(106),r=s(706),n=s(711),a=s(84),c=s(0);class l extends o.Component{render(){const{location:e}=this.props;return Object(c.jsx)(r.a,{children:Object(c.jsxs)(a.a,{className:"embedded-modal",children:[Object(c.jsx)(i.a,{titleTag:"Sign up",titleShare:"Sign up",url:"".concat("https://carsandbids.com").concat(e.pathname).concat(e.search)}),Object(c.jsx)("div",{className:"row",children:Object(c.jsx)("div",{className:"col",children:Object(c.jsx)(n.default,{isOpen:!0,onClose:()=>{},isEmbedded:!0,screen:"signup"})})})]})})}}t.default=l},838:function(e,t,s){"use strict";s.r(t);var o=s(1),i=s(38),r=s(106),n=s(84),a=s(711),c=s(0);class l extends o.Component{render(){const{location:e}=this.props,t=this.props.match.params.token;return Object(c.jsxs)(n.a,{className:"embedded-modal",children:[Object(c.jsx)(r.a,{titleTag:"Verifying Email",titleShare:"Verifying Email",url:"".concat("https://carsandbids.com").concat(e.pathname).concat(e.search)}),Object(c.jsx)("div",{className:"row",children:Object(c.jsx)("div",{className:"col",children:Object(c.jsx)(a.default,{isOpen:!0,onClose:()=>{},isEmbedded:!0,screen:"verifyemail",confirmation_token:t})})})]})}}t.default=Object(i.h)(l)},840:function(e,t,s){"use strict";s.r(t);var o=s(1),i=s(15),r=s(13),n=s(24),a=s.n(n),c=s(30),l=s(706),d=s(84),h=s(4),p=s(20),m=s(85),u=s(0);class j extends o.Component{componentDidMount(){if("ReactSnap"===navigator.userAgent)return;if(this.props.isAuthenticated())return null;const{location:e}=this.props;if(a.a.parse(e.search).error)this.props.history.replace(h.o.path,{modal:"AuthModal",options:{screen:"signin"}});else{const t=a.a.parse(e.hash);if(t.access_token)return void this.props.actions.checkCreds({provider:"facebook",credential:t.access_token}).then((e=>{this.props.history.push(h.o.path)}),(e=>{const s=e.error_body;let o="";s&&s.email&&(o=s.email),o&&e.error_code===p.V?this.props.history.replace(h.o.path,{modal:"AuthModal",options:{screen:"setusername",provider:"facebook",credential:t.access_token,email:o}}):o&&e.error_code===p.o?this.props.history.replace(h.o.path,{modal:"AuthModal",options:{screen:"verifylinking",provider:"facebook",credential:t.access_token,email:o}}):this.props.history.replace(h.o.path,{modal:"AuthModal",options:{screen:"signin"}})}))}this.props.history.replace(h.o.path,{modal:"AuthModal",options:{screen:"signin"}})}render(){return Object(u.jsx)(l.a,{children:Object(u.jsx)(d.a,{})})}}t.default=Object(c.a)(Object(r.b)(null,(e=>({actions:Object(i.b)({checkCreds:m.b},e)})))(j))},841:function(e,t,s){"use strict";s.r(t);var o=s(1),i=s(15),r=s(13),n=s(24),a=s.n(n),c=s(30),l=s(706),d=s(84),h=s(4),p=s(20),m=s(85),u=s(0);class j extends o.Component{componentDidMount(){if("ReactSnap"===navigator.userAgent)return;if(this.props.isAuthenticated())return null;const{location:e}=this.props,t=a.a.parse(e.search?e.search:e.hash);if(t.error)this.props.history.replace(h.o.path,{modal:"AuthModal",options:{screen:"signin"}});else if(t.code&&t.id_token){const e=t.id_token;return void this.props.actions.checkCreds({provider:"apple",credential:e}).then((e=>{this.props.history.push(h.o.path)}),(t=>{const s=t.error_body;let o="";s&&s.email&&(o=s.email),o&&t.error_code===p.V?this.props.history.replace(h.o.path,{modal:"AuthModal",options:{screen:"setusername",provider:"apple",credential:e,email:o}}):o&&t.error_code===p.o?this.props.history.replace(h.o.path,{modal:"AuthModal",options:{screen:"verifylinking",provider:"apple",credential:e,email:o}}):this.props.history.replace(h.o.path,{modal:"AuthModal",options:{screen:"signin"}})}))}this.props.history.replace(h.o.path,{modal:"AuthModal",options:{screen:"signin"}})}render(){return Object(u.jsx)(l.a,{children:Object(u.jsx)(d.a,{})})}}t.default=Object(c.a)(Object(r.b)(null,(e=>({actions:Object(i.b)({checkCreds:m.b},e)})))(j))}}]);